<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sudip Mani Gautam ‚Äî Portfolio</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="light-theme">
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-light shadow-sm py-3">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">Sudip Mani Gautam</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navMain">
        <ul class="navbar-nav ms-auto align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
          <li class="nav-item"><a class="nav-link" href="portfolio.html">Portfolio</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
          <li class="nav-item"><a class="nav-link" href="myprojects.html">My Projects</a></li>
          <li class="nav-item d-lg-none"><a class="nav-link" href="#">Others</a></li>
          <li class="nav-item ms-3">
            <!-- Theme toggle -->
            <div class="theme-toggle" id="themeToggle" title="Toggle light/dark">
              <span class="icon-sun">‚òÄÔ∏è</span>
              <div class="toggle-knob"></div>
              <span class="icon-moon">üåô</span>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="container py-5">
    <div class="row align-items-center">
      <div class="col-md-4 text-center">
        <div class="profile-square mx-auto">
          <img src="assets/img/image.webp" alt="Profile" class="img-fluid rounded">
        </div>
      </div>

      <div class="col-md-8">
        <h1 class="display-6 mb-2">Hi ‚Äî I'm <span class="text-primary">Sudip Mani Gautam</span></h1>
        <p class="lead">Aspiring full-stack developer with hands-on experience in React, Java, JavaScript, HTML, CSS and building end-to-end web applications. I enjoy crafting efficient, usable interfaces and learning new tools.</p>

        <p>
          <a class="btn btn-outline-primary me-2" href="portfolio.html">See my projects</a>
          <a class="btn btn-primary" href="assets/resume.pdf" download>Download CV (PDF)</a>
        </p>

        <!-- Social -->
        <div>
          <a class="me-3" href="https://www.linkedin.com/in/sudip-mani-gautam-038967285/" target="_blank">LinkedIn</a>
          <a class="me-3" href="https://github.com/Sudip-Mani-Gautam" target="_blank">GitHub</a>
        </div>
      </div>
    </div>
  </header>

  <!-- PROJECTS PREVIEW -->
  <section class="container py-4">
    <h3 class="mb-3">Top Projects</h3>
    <div class="row g-3">
      <!-- Project Card 1 -->
      <div class="col-md-4">
        <div class="card h-100">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Q&A Platform</h5>
            <p class="card-text small text-muted">Dynamic Q&A platform with full CRUD, built with Node.js and a JavaScript frontend (auth and data management).</p>
            <div class="mt-auto">
              <button class="btn btn-sm btn-outline-primary w-100 project-see-more" data-target="qa">See more</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Project Card 2 -->
      <div class="col-md-4">
        <div class="card h-100">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Hotel Management System</h5>
            <p class="card-text small text-muted">Group project using Java (JSP/Servlets) and MySQL ‚Äî handles room booking, customers and billing (MVC).</p>
            <div class="mt-auto">
              <button class="btn btn-sm btn-outline-primary w-100 project-see-more" data-target="hotel">See more</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Project Card 3 -->
      <div class="col-md-4">
        <div class="card h-100">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">E-Commerce Website</h5>
            <p class="card-text small text-muted">Frontend + shopping cart + user auth demo built with HTML, CSS and JavaScript.</p>
            <div class="mt-auto">
              <button class="btn btn-sm btn-outline-primary w-100 project-see-more" data-target="ecom">See more</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Tic-Tac-Toe (PVP or AI)</title>
    <!-- Font Awesome for sleek icons (Sun and Moon) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        /* ---------------------------------------------------- */
        /* --- CSS Variables for Light/Dark Mode --- */
        /* ---------------------------------------------------- */
        :root {
            /* Light Mode Defaults */
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-color: #1f2937;
            --status-bg: #e2e8f0;
            --cell-bg: #cbd5e1;
            --primary-color: #0d9488; 
            --accent-x: #3b82f6;      
            --accent-o: #ef4444;      
            --win-color: #10b981;     
            --shadow-color: rgba(46, 73, 100, 0.15);
            --button-mode-color: #60a5fa; 
            --button-shadow: #2563eb;
            
            /* Toggle Specific - Light Mode Colors */
            --toggle-track-color: #a0aec0; /* Light Gray track */
            --toggle-handle-color: #ffffff; /* White handle */
            --toggle-handle-shadow: rgba(0,0,0,0.3);
            --toggle-icon-light: #f59e0b; /* Yellow sun */
            --toggle-icon-dark: #f3f4f6; /* Off-white moon */
        }

        .dark-mode {
            --bg-color: #000000; /* PURE BLACK for the main body background */
            --card-bg: #1f2937;  /* Dark gray for contrast */
            --text-color: #f3f4f6;
            --status-bg: #4b5563;
            --cell-bg: #4b5563;
            --primary-color: #60a5fa; 
            --accent-x: #60a5fa;
            --accent-o: #f87171;      
            --win-color: #10b981;     
            --shadow-color: rgba(0, 0, 0, 0.7); 
            --button-mode-color: #60a5fa;
            --button-shadow: #2563eb;
            
            /* Toggle Specific - Dark Mode Colors */
            --toggle-track-color: #3b82f6; /* Blue track when ON */
            --toggle-handle-color: #f3f4f6; /* Off-white handle */
            --toggle-handle-shadow: rgba(0,0,0,0.5);
            --toggle-icon-light: #1f2937; /* Dark background for sun */
            --toggle-icon-dark: #f3f4f6; /* Bright moon */
        }

        /* ---------------------------------------------------- */
        /* --- General and Layout Styles --- */
        /* ---------------------------------------------------- */
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: var(--bg-color);
            font-family: 'Inter', sans-serif;
            color: var(--text-color);
            padding: 20px;
            transition: background-color 0.3s;
        }

        .game-container {
            position: relative;
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 40px var(--shadow-color);
            max-width: 90%;
            width: 400px;
            text-align: center;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 25px;
            font-size: 2.5rem;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.05);
        }

        /* --- Header: Toggle and Stats Container --- */
        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 0 5px;
        }

        /* --- Stats Display --- */
        #statsDisplay {
            display: flex;
            gap: 10px;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-color);
            background-color: var(--status-bg);
            padding: 8px 12px;
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }
        .stat-label {
            font-size: 0.75rem;
            color: #9ca3af; 
        }
        .stat-value {
            font-weight: 700;
        }


        /* ---------------------------------------------------- */
        /* --- Theme Toggle Switch (Sleek Slider) --- */
        /* ---------------------------------------------------- */
        .toggle-switch {
            position: relative; /* To contain the absolute icons */
            width: 80px; /* Wider container */
            height: 32px; /* Taller container */
            border-radius: 20px;
            background-color: var(--toggle-track-color);
            transition: background-color 0.4s ease-in-out;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        .toggle-switch input {
            display: none;
        }

        .slider {
            /* This is the handle */
            position: absolute;
            content: "";
            height: 26px; 
            width: 26px;
            top: 3px; /* Center handle vertically */
            left: 3px;
            background-color: var(--toggle-handle-color);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* Bounce effect */
            border-radius: 50%;
            box-shadow: 0 2px 5px var(--toggle-handle-shadow);
        }
        
        /* Move the handle for dark mode */
        input:checked + .slider {
            transform: translateX(48px); /* 80px width - 3px left/right padding - 26px handle width = 48px travel */
        }
        
        /* Sun/Moon Icons Integrated */
        .icon-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 8px; /* Slightly more padding for the new icons */
            pointer-events: none; /* Icons should not interfere with click */
            font-size: 1.1rem; /* Adjusted for Font Awesome icons */
        }

        .sun-icon {
            color: var(--toggle-icon-light);
            opacity: 1;
            transition: opacity 0.4s ease, color 0.4s ease;
        }

        .moon-icon {
            color: var(--toggle-icon-dark);
            opacity: 0; /* Hidden by default in light mode */
            transition: opacity 0.4s ease, color 0.4s ease;
        }

        .dark-mode .sun-icon {
            color: var(--toggle-icon-light);
            opacity: 0; /* Hidden in dark mode */
        }

        .dark-mode .moon-icon {
            opacity: 1; /* Visible in dark mode */
        }


        /* --- Status and Controls --- */
        #status {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding: 12px;
            border-radius: 8px;
            min-height: 40px;
            background-color: var(--status-bg);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s, transform 0.3s, box-shadow 0.3s;
            position: relative; 
            overflow: hidden;
        }
        
        /* Status specific colors for game end */
        .win-status {
            background-color: var(--win-color) !important;
            color: white !important;
        }

        .lose-status {
            background-color: var(--accent-o) !important;
            color: white !important;
        }

        .draw-status {
            background-color: var(--primary-color) !important;
            color: white !important;
        }
        
        /* Animation for the status bar on game end */
        .game-over {
            animation: status-end-animation 1s ease-in-out;
        }

        @keyframes status-end-animation {
            0%, 100% { transform: scale(1); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
            50% { transform: scale(1.02); box-shadow: 0 8px 30px rgba(0,0,0,0.5); }
        }

        /* --- Temporary Notification Pop-up --- */
        #notification {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            padding: 20px 30px;
            border-radius: 12px;
            font-size: 2.5rem;
            font-weight: 800;
            color: white;
            box-shadow: 0 0 30px var(--shadow-color);
            opacity: 0;
            pointer-events: none; /* Allows clicks to go through to the board */
            transition: opacity 0.3s, transform 0.3s;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            line-height: 1;
        }

        .notification-win { background-color: rgba(16, 185, 129, 0.9); } /* Green */
        .notification-lose { background-color: rgba(239, 68, 68, 0.9); } /* Red */
        .notification-draw { background-color: rgba(96, 165, 250, 0.9); } /* Blue */

        .notification-active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.1);
            animation: fade-pulse 0.5s ease-out;
        }

        @keyframes fade-pulse {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            80% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1.0); opacity: 1; }
        }

        .button-group {
            margin-top: 20px;
            display: flex;
            justify-content: space-around;
            gap: 10px;
        }

        .button-group button, #modeSelection button {
            padding: 12px 25px;
            color: var(--text-color);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
            flex-grow: 1; 
        }

        /* Mode Selection Buttons */
        #modeSelection button {
            background-color: var(--button-mode-color);
            color: #1f2937;
            box-shadow: 0 4px var(--button-shadow);
            margin: 10px 0;
            width: 100%;
        }

        #modeSelection button:hover {
            filter: brightness(1.1);
        }

        #modeSelection button:active {
            transform: translateY(2px);
            box-shadow: 0 2px var(--button-shadow);
        }

        /* Restart and Change Mode Buttons (Secondary) */
        .button-group button {
            background-color: var(--cell-bg);
            color: var(--text-color);
            box-shadow: 0 4px var(--status-bg);
        }
        
        .button-group button:hover {
            filter: brightness(0.9);
        }

        .button-group button:active {
            transform: translateY(2px);
            box-shadow: 0 2px var(--status-bg);
        }


        /* ---------------------------------------------------- */
        /* --- Game Grid and Cells --- */
        /* ---------------------------------------------------- */
        #board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 10px;
            width: 100%;
            aspect-ratio: 1 / 1; 
            margin-bottom: 20px;
        }
        
        #gameContent {
            position: relative; 
        }

        /* Cell (Tile) Styles */
        .cell {
            background-color: var(--cell-bg);
            border-radius: 12px; 
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            font-weight: 900;
            cursor: pointer;
            transition: background-color 0.15s ease-in-out, transform 0.1s, color 0.3s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            user-select: none;
            line-height: 1; 
        }

        .cell:hover:not(.X):not(.O) {
            filter: brightness(0.95);
        }

        .cell:active {
            transform: scale(0.98);
        }

        /* Player Colors */
        .X {
            color: var(--accent-x); 
        }

        .O {
            color: var(--accent-o); 
        }

        /* Winning Line Highlight */
        .win {
            background-color: var(--win-color) !important; 
            color: #ffffff !important;
            animation: pulse 0.5s infinite alternate;
        }

        @keyframes pulse {
            from {
                opacity: 1;
            }
            to {
                opacity: 0.8;
            }
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .game-container {
                padding: 20px;
            }
            h1 {
                font-size: 2rem;
            }
            .cell {
                font-size: 3rem;
            }
            .header-controls {
                flex-direction: column-reverse;
                gap: 10px;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        
        <!-- Theme Toggle and Stats Header -->
        <div class="header-controls">
            <!-- Game Statistics -->
            <div id="statsDisplay">
                <div class="stat-item">
                    <div class="stat-value" id="statWins">0</div>
                    <div class="stat-label">Wins</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="statLosses">0</div>
                    <div class="stat-label">Losses</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="statDraws">0</div>
                    <div class="stat-label">Draws</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="statTotal">0</div>
                    <div class="stat-label">Total</div>
                </div>
            </div>

            <!-- Theme Toggle Switch -->
            <label class="toggle-switch">
                <input type="checkbox" id="themeToggleCheckbox">
                
                <!-- Animated Handle -->
                <span class="slider"></span>

                <!-- Icons Integrated into the Track -->
                <div class="icon-container">
                    <!-- Sun Icon (Light Mode) - Now Font Awesome -->
                    <i class="fas fa-sun sun-icon"></i>
                    <!-- Moon Icon (Dark Mode) - Now Font Awesome -->
                    <i class="fas fa-moon moon-icon"></i>
                </div>
            </label>
        </div>

        <h1>Ultimate Tic-Tac-Toe</h1>

        <div id="status">Select Game Mode</div>

        <!-- Mode Selection Screen -->
        <div id="modeSelection">
            <button onclick="selectMode('PVP')">
                Player vs. Friend (PVP)
            </button>
            <button onclick="selectMode('PVSAI')">
                Player vs. AI (Unbeatable)
            </button>
        </div>

        <!-- Game Board (Initially Hidden) -->
        <div id="gameContent" style="display: none;">
            
            <!-- NEW: Notification Popup for Game End -->
            <div id="notification"></div> 

            <div id="board">
                <!-- Cells generated by JavaScript -->
            </div>
    
            <div class="button-group">
                <button onclick="handleGameRestart()">Restart Game</button>
                <button onclick="handleChangeMode()">Change Mode</button>
            </div>
        </div>

    </div>

    <script>
        // --- THEME LOGIC ---
        const DARK_MODE_CLASS = 'dark-mode';
        const themeToggleCheckbox = document.getElementById('themeToggleCheckbox');

        /**
         * Loads the theme preference from localStorage and applies it.
         */
        function applySavedTheme() {
            const savedTheme = localStorage.getItem('tictactoe-theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            const isDark = savedTheme === 'dark' || (savedTheme === null && prefersDark);
            
            if (isDark) {
                document.body.classList.add(DARK_MODE_CLASS);
            } else {
                document.body.classList.remove(DARK_MODE_CLASS);
            }
            if (themeToggleCheckbox) {
                themeToggleCheckbox.checked = isDark;
                themeToggleCheckbox.addEventListener('change', toggleTheme);
            }
        }

        /**
         * Toggles between dark and light mode.
         */
        function toggleTheme() {
            const isDark = themeToggleCheckbox.checked;
            if (isDark) {
                document.body.classList.add(DARK_MODE_CLASS);
                localStorage.setItem('tictactoe-theme', 'dark');
            } else {
                document.body.classList.remove(DARK_MODE_CLASS);
                localStorage.setItem('tictactoe-theme', 'light');
            }
        }

        // --- STATS LOGIC ---
        let stats = { wins: 0, losses: 0, draws: 0, total: 0 };
        const STATS_KEY = 'tictactoe-stats';

        function loadStats() {
            const savedStats = localStorage.getItem(STATS_KEY);
            if (savedStats) {
                try {
                    stats = JSON.parse(savedStats);
                } catch (e) {
                    console.error("Could not parse saved stats:", e);
                }
            }
            updateStatsDisplay();
        }

        function saveStats() {
            localStorage.setItem(STATS_KEY, JSON.stringify(stats));
            updateStatsDisplay();
        }

        function updateStatsDisplay() {
            document.getElementById('statWins').textContent = stats.wins;
            document.getElementById('statLosses').textContent = stats.losses;
            document.getElementById('statDraws').textContent = stats.draws;
            document.getElementById('statTotal').textContent = stats.total;
        }


        // --- GAME CONSTANTS & MODES ---
        const HUMAN_PLAYER = 'X';
        const AI_PLAYER = 'O';
        const PVP_MODE = 'PVP';
        const PVSAI_MODE = 'PVSAI';

        // --- DOM Elements ---
        const modeSelectionElement = document.getElementById('modeSelection');
        const gameContentElement = document.getElementById('gameContent');
        const boardElement = document.getElementById('board');
        const statusElement = document.getElementById('status');
        
        // --- GAME STATE ---
        let gameActive = true;
        let boardState = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = HUMAN_PLAYER; 
        let gameMode = null; 

        // Winning combinations (indices of the boardState array)
        const winningConditions = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], 
            [0, 3, 6], [1, 4, 7], [2, 5, 8], 
            [0, 4, 8], [2, 4, 6]  
        ];

        // --- MODE SELECTION AND RESTART ---

        /**
         * Sets the game mode and starts the game.
         * @param {string} mode - The selected mode (PVP or PVSAI).
         */
        function selectMode(mode) {
            gameMode = mode;
            modeSelectionElement.style.display = 'none';
            gameContentElement.style.display = 'block';
            handleGameRestart(); 
        }
        
        /**
         * Resets the board and game state for the current mode.
         */
        function handleGameRestart() {
            gameActive = true;
            boardState = ['', '', '', '', '', '', '', '', ''];
            currentPlayer = HUMAN_PLAYER;
            
            // Clear UI
            document.querySelectorAll('.cell').forEach(cell => {
                cell.textContent = '';
                cell.classList.remove('X', 'O', 'win');
            });

            // Clear game-over specific status classes
            statusElement.classList.remove('game-over', 'win-status', 'lose-status', 'draw-status');

            if (gameMode === PVP_MODE) {
                statusElement.textContent = `Player X's Turn (PVP)`;
            } else {
                statusElement.textContent = `Your Turn (X)`;
            }
        }

        /**
         * Resets the game and returns to the mode selection screen.
         */
        function handleChangeMode() {
            gameMode = null;
            gameActive = true;
            boardState = ['', '', '', '', '', '', '', '', ''];
            currentPlayer = HUMAN_PLAYER;

            // Clear UI
            document.querySelectorAll('.cell').forEach(cell => {
                cell.textContent = '';
                cell.classList.remove('X', 'O', 'win');
            });
            // Clear game-over specific status classes
            statusElement.classList.remove('game-over', 'win-status', 'lose-status', 'draw-status');


            modeSelectionElement.style.display = 'block';
            gameContentElement.style.display = 'none';
            statusElement.textContent = `Select Game Mode`;
        }
        
        // --- MINIMAX CORE LOGIC (AI) ---

        function checkWin(board) {
            for (const condition of winningConditions) {
                const [a, b, c] = condition;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    return { winner: board[a], cells: condition };
                }
            }
            return { winner: null, cells: null };
        }

        function getEmptyCells(board) {
            return board.map((val, index) => val === '' ? index : -1).filter(index => index !== -1);
        }

        function minimax(currentBoard, player) {
            const result = checkWin(currentBoard);
            const emptyCells = getEmptyCells(currentBoard);

            if (result.winner === AI_PLAYER) return { score: 10 };
            if (result.winner === HUMAN_PLAYER) return { score: -10 };
            if (emptyCells.length === 0) return { score: 0 };

            let bestScore = player === AI_PLAYER ? -Infinity : Infinity;
            let bestMoveIndex = null;

            for (const index of emptyCells) {
                currentBoard[index] = player;
                const score = minimax(currentBoard, player === AI_PLAYER ? HUMAN_PLAYER : AI_PLAYER).score;
                currentBoard[index] = ''; // Backtrack

                if (player === AI_PLAYER) {
                    if (score > bestScore) {
                        bestScore = score;
                        bestMoveIndex = index;
                    }
                } else {
                    if (score < bestScore) {
                        bestScore = score;
                        bestMoveIndex = index;
                    }
                }
            }

            return { score: bestScore, index: bestMoveIndex };
        }

        function makeAIMove() {
            // Indicate AI turn
            statusElement.textContent = 'AI is Thinking...';

            setTimeout(() => {
                const bestMove = minimax(boardState, AI_PLAYER);
                
                if (bestMove.index !== null) {
                    // Update state and UI for AI move
                    boardState[bestMove.index] = AI_PLAYER;
                    const cellToClick = document.querySelector(`.cell[data-index="${bestMove.index}"]`);
                    if (cellToClick) {
                        cellToClick.textContent = AI_PLAYER;
                        cellToClick.classList.add(AI_PLAYER);
                    }
                }
                
                // Check if the AI move ended the game
                if (handleResultValidation()) {
                    return;
                }

                // Continue the human turn if the game is still active
                if (gameActive) {
                    currentPlayer = HUMAN_PLAYER;
                    statusElement.textContent = `Your Turn (X)`;
                }
            }, 500); // 500ms delay
        }
        
        /**
         * Shows an animated pop-up notification for the result.
         * @param {string} message - The text to display.
         * @param {string} type - 'win', 'lose', or 'draw'.
         */
        function showNotification(message, type) {
            const notificationEl = document.getElementById('notification');
            if (!notificationEl) return;

            // Clean up old classes
            notificationEl.classList.remove('notification-win', 'notification-lose', 'notification-draw', 'notification-active');
            
            // Set new content and styling
            // Strip emojis/text from status message for a cleaner pop-up
            notificationEl.textContent = message.replace('üéâ', '').replace('ü§ñ', '').replace('ü§ù', '').trim();
            notificationEl.classList.add(`notification-${type}`);

            // Trigger animation after a small gap (50ms)
            setTimeout(() => {
                notificationEl.classList.add('notification-active');
            }, 50);

            // Hide after 23 seconds (23000ms) as requested
            setTimeout(() => {
                notificationEl.classList.remove('notification-active');
            }, 23000);
        }

        // --- GAME CONTROL LOGIC ---

        /**
         * Switches the current player for PVP mode.
         */
        function handlePlayerChange() {
            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            statusElement.textContent = `Player ${currentPlayer}'s Turn (PVP)`;
        }

        /**
         * Checks if the current move results in a win or a draw and updates stats.
         * @returns {boolean} True if the game is over, false otherwise.
         */
        function handleResultValidation() {
            const { winner, cells } = checkWin(boardState);

            if (winner) {
                gameActive = false;
                let message;
                let statusClass;
                
                if (gameMode === PVSAI_MODE) {
                    stats.total++;
                    if (winner === HUMAN_PLAYER) {
                        message = 'You Win! üéâ';
                        statusClass = 'win-status';
                        showNotification('WINNER!', 'win'); // Show Pop-up
                        stats.wins++;
                    } else {
                        message = 'AI Wins! ü§ñ';
                        statusClass = 'lose-status';
                        showNotification('GAME OVER', 'lose'); // Show Pop-up
                        stats.losses++;
                    }
                    saveStats();
                } else {
                    message = `Player ${winner} Wins! üéâ`;
                    statusClass = 'win-status'; // Treat PVP win the same visually
                    showNotification(`Player ${winner} Wins!`, 'win'); // Show Pop-up
                }
                
                statusElement.textContent = message;
                // Apply status color and animation trigger
                statusElement.classList.add(statusClass, 'game-over');
                
                // Highlight winning cells
                cells.forEach(index => {
                    const cell = document.querySelector(`.cell[data-index="${index}"]`);
                    if(cell) {
                        cell.classList.add('win');
                    }
                });
                return true;
            }

            // Check for a Draw 
            if (!boardState.includes('')) {
                gameActive = false;
                const message = 'It\'s a Draw! ü§ù';
                
                if (gameMode === PVSAI_MODE) {
                    stats.total++;
                    stats.draws++;
                    saveStats();
                }

                statusElement.textContent = message;
                // Apply status color and animation trigger
                statusElement.classList.add('draw-status', 'game-over');
                showNotification('DRAW', 'draw'); // Show Pop-up

                return true;
            }

            return false;
        }

        /**
         * Handles a user click on a game cell.
         * @param {Event} event - The click event.
         */
        function handleCellClick(event) {
            if (!gameActive || (gameMode === PVSAI_MODE && currentPlayer === AI_PLAYER)) return;

            const clickedCell = event.target;
            const clickedCellIndex = parseInt(clickedCell.getAttribute('data-index'));

            // Check if the cell is already played
            if (boardState[clickedCellIndex] !== '') {
                return;
            }

            // 1. Make the move
            boardState[clickedCellIndex] = currentPlayer;
            clickedCell.textContent = currentPlayer;
            clickedCell.classList.add(currentPlayer);
            
            // 2. Check for Win/Draw
            if (handleResultValidation()) {
                return;
            }
            
            // 3. Next Turn Logic based on mode
            if (gameMode === PVP_MODE) {
                handlePlayerChange();
            } else if (gameMode === PVSAI_MODE) {
                // If Human (X) just moved, switch to AI (O)
                currentPlayer = AI_PLAYER; 
                makeAIMove();
            }
        }

        /**
         * Initializes the board by creating the 9 cell elements.
         */
        function initializeBoard() {
            // Load theme and stats first
            loadStats();
            applySavedTheme(); 
            
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.setAttribute('data-index', i);
                cell.addEventListener('click', handleCellClick);
                boardElement.appendChild(cell);
            }
            // Start by showing the mode selection screen
            handleChangeMode(); 
        }

        // --- START ---
        window.onload = initializeBoard;
    </script>
</body>
</html>


  <!-- FOOTER -->
  <footer class="bg-grey border-top mt-5">
    <div class="container py-4 d-flex flex-column flex-md-row justify-content-between align-items-center">
      <div class="small">¬© <span id="year"></span> Sudip Mani Gautam</div>
      <div>
        <a class="me-3 footer-link" href="index.html">Home</a>
        <a class="me-3 footer-link" href="about.html">About</a>
        <a class="me-3 footer-link" href="portfolio.html">Portfolio</a>
        <a class="me-3 footer-link" href="contact.html">Contact</a>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/main.js"></script>
</body>
</html>

